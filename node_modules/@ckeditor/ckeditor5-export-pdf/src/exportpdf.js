/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x5bea12}from'ckeditor5/src/core';import{ButtonView as _0xea6cab,View as _0x401d78,Notification as _0x2ef026}from'ckeditor5/src/ui';import _0x2b82f3 from'./exportpdfcommand';import _0x23861c from'../theme/icons/exportpdf.svg';import'../theme/exportpdf.css';export default class p extends _0x5bea12{static get['pluginName'](){return'ExportPdf';}static get['requires'](){return['CloudServices',_0x2ef026];}['init'](){const _0x2a86d1=this['editor'],t=_0x2a86d1['t'],_0x5bddcc=_0x2a86d1['config']['get']('exportPdf')||{};_0x2a86d1['commands']['add']('exportPdf',new _0x2b82f3(_0x2a86d1)),_0x2a86d1['ui']['componentFactory']['add']('exportPdf',_0xb7906f=>{const _0x1e7bb8=_0x2a86d1['commands']['get']('exportPdf'),_0x5864ba=new _0xea6cab(_0xb7906f);_0x5864ba['set']({'label':t('Export\x20to\x20PDF'),'icon':_0x23861c,'tooltip':!0x0}),_0x5864ba['bind']('isOn','isEnabled')['to'](_0x1e7bb8,'isBusy','isEnabled'),_0x5864ba['extendTemplate']({'attributes':{'class':[_0x5864ba['bindTemplate']['if']('isOn','ck-exportpdf_status-pending')]}});const _0x400341=new _0x401d78();return _0x400341['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner-container']},'children':[{'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner']}}]}),_0x5864ba['children']['add'](_0x400341),this['listenTo'](_0x5864ba,'execute',()=>{_0x2a86d1['execute']('exportPdf',_0x5bddcc),_0x2a86d1['editing']['view']['focus']();}),_0x5864ba;});const _0x44d900=_0x2a86d1['plugins']['get']('CloudServices');if(!0x1===_0x5bddcc['tokenUrl'])this['_token']=null;else{if(_0x5bddcc['tokenUrl'])return _0x44d900['registerTokenUrl'](_0x5bddcc['tokenUrl'])['then'](_0xf34091=>{this['_token']=_0xf34091;});this['_token']=_0x44d900['token'];}}}