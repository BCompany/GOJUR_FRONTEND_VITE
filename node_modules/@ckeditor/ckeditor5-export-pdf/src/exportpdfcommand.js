/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Command as _0xb7a7de}from'ckeditor5/src/core';import{getStyles as _0x180021}from'./utils';export default class o extends _0xb7a7de{constructor(_0x4ddca2){super(_0x4ddca2),this['set']('isBusy',!0x1),this['affectsData']=!0x1;}['refresh'](){this['isEnabled']=!this['isBusy'],this['value']=this['isBusy']?'pending':void 0x0;}['execute'](_0x179fff={}){const _0x253c9a=this['editor'],t=_0x253c9a['t'],_0x12691c=_0x179fff['converterUrl']||'https://pdf-converter.cke-cs.com/v1/convert/',_0xc41bd4=_0x179fff['dataCallback']||(_0x409fa7=>_0x409fa7['getData']()),_0x4b0dcf=_0x253c9a['plugins']['get']('ExportPdf'),_0x30fa82=_0x179fff['token']||_0x4b0dcf['_token'];return this['isBusy']=!0x0,this['refresh'](),_0x180021(_0x179fff['stylesheets']||['EDITOR_STYLES'])['then'](_0x1e1dda=>{const _0x5da9ff={'html':'<html>\x0a\x09\x09\x09\x09\x09\x09<head>\x0a\x09\x09\x09\x09\x09\x09\x09<meta\x20charset=\x22utf-8\x22>\x0a\x09\x09\x09\x09\x09\x09</head>\x0a\x09\x09\x09\x09\x09\x09<body>\x0a\x09\x09\x09\x09\x09\x09\x09<div\x20class=\x22ck-content\x22\x20dir=\x22'+_0x253c9a['locale']['contentLanguageDirection']+'\x22>\x0a\x09\x09\x09\x09\x09\x09\x09\x09'+_0xc41bd4(_0x253c9a)+'\x0a\x09\x09\x09\x09\x09\x09\x09</div>\x0a\x09\x09\x09\x09\x09\x09<body>\x0a\x09\x09\x09\x09\x09</html>','css':_0x1e1dda,'options':_0x179fff['converterOptions']},_0x62eb78={'method':'POST','headers':{'Content-Type':'application/json','Accept':'application/pdf',..._0x30fa82?{'Authorization':_0x30fa82['value']}:null,'x-cs-app-id':_0x179fff['appID']||'cke5'},'body':JSON['stringify'](_0x5da9ff)};return window['fetch'](_0x12691c,_0x62eb78)['then'](_0x22fc55=>{if(0xc8!==_0x22fc55['status'])throw _0x22fc55;return _0x22fc55['blob']();})['then'](_0x37ea76=>{this['o'](_0x37ea76,_0x179fff['fileName']||'document.pdf');});})['catch'](_0x586a38=>{throw _0x253c9a['plugins']['get']('Notification')['showWarning'](t('An\x20error\x20occurred\x20while\x20generating\x20the\x20PDF.')),_0x586a38;})['finally'](()=>{this['isBusy']=!0x1,this['refresh']();});}['o'](_0x53d39b,_0xae649){const _0x7c9311=document['createElement']('a');_0x7c9311['href']=window['URL']['createObjectURL'](_0x53d39b),_0x7c9311['download']=_0xae649,_0x7c9311['click'](),_0x7c9311['remove']();}}